<div class="container">
  <div  class="form-container">
    <input class="" type="file"
           accept="video/*"
           id="video-input"
           (change)="handleFileInput($event.target.files)">
  </div>


  <div *ngIf="video" class="example-container">
    <div
      #example
      class="exampleGif"
      [ngStyle]="exampleGif">
      <video
        class="video"
        #videoplayer
        (loadedmetadata)="onMetadata($event.target, videoplayer)"
        (timeupdate)="timeupdate($event.target.currentTime)"
        [src]="video.rawUrl"
        muted>
      </video>
      <div
        class="example-text"
        ngDraggable
        [bounds]="example"
        inBounds="true"
        (endOffset)="onMoveEnd($event)"
        [ngStyle]="textSize"
        [style.color]="textColor"
        [style.font-family]="textFont"
      >
        {{optionsForm.value.text}}
      </div>
    </div>
  </div>


  <div class="slider" *ngIf="duration" ngbTooltip="Crop yours video">

    <ion-range-slider #sliderElement
                      type="double"
                      [min]=0
                      [max]="duration"
                      [from]=0
                      [to]="duration"
                      [min_interval]=1
                      (onChange)="crop($event)"
                      [prefix]="'Sec:'"
    ></ion-range-slider>
  </div>

  <div *ngIf="duration"  class="controls">
    <div class="btn-group btn-group-toggle">
      <button class="btn btn-primary" (click)="play()">Play</button>
      <button class="btn btn-primary" (click)="pause()">Pause</button>
      <button class="btn btn-primary"
              (click)="isCollapsed = !isCollapsed"
              [attr.aria-expanded]="!isCollapsed"
              aria-controls="settings">Setting</button>
      <button class="btn btn-primary"
              (click)="generate(content)"
              [disabled]="!video">Generate</button>
    </div>
  </div>

  <div id="settings" [ngbCollapse]="isCollapsed">
        <div  [formGroup]="optionsForm">
          <div class="">
            <input type="text"
                   class="form-control"
                   id="tags"
                   formControlName="tags"
                   placeholder="Tags">
          </div>
          <div class="form-control">
            <label for="speed">Speed</label>
            <input type="range"
                   class="form-control"
                   id="speed"
                   formControlName="speed"
                   min="0.1" max="3" value="0.1" step="0.1">
          </div>
          <div class="form-control">
            <label for="width">width</label>
            <input type="range"
                   class="form-control"
                   id="width"
                   formControlName="width"
                   min="100" max="1000" value="100" step="1"
                   (change)="exampleChange()">
          </div>
          <div class="">
            <input type="text"
                   class="form-control"
                   id="text"
                   formControlName="text"
                   placeholder="Text">
          </div>
          <div class="form-control">
            <label for="textSize">Text size</label>
            <input type="range"
                   class="form-control"
                   id="textSize"
                   formControlName="textSize"
                   min="5" max="50" value="5" step="1"
                   (change)="textSizeChange()">
          </div>
          <div class="form-control">
            <label for="textColor">Text textColor</label>
            <input
              class="form-control"
              id="textColor"
              formControlName="textColor"
              [style.background]="textColor"
              [colorPicker]="textColor"
              (colorPickerChange)="textColorChange($event)">
          </div>
          <div ngbDropdown placement="top-right"  class="form-control">
            <button class="btn " id="ddfont" ngbDropdownToggle>Select font</button>
            <div ngbDropdownMenu aria-labelledby="ddfont">
              <button
                class="dropdown-item"
                id="serif"
                (click)="selectFont($event)">
                serif
              </button>
              <button
                class="dropdown-item"
                id="sans-serif"
                (click)="selectFont($event)">
                sans-serif
              </button>
              <button
                class="dropdown-item"
                id="system-ui"
                (click)="selectFont($event)">
                system-ui
              </button>
              <button
                class="dropdown-item"
                id="monospace"
                (click)="selectFont($event)">
                monospace
              </button>
              <button
                class="dropdown-item"
                id="cursive"
                (click)="selectFont($event)">
                cursive
              </button>
              <button
                class="dropdown-item"
                id="fantasy"
                (click)="selectFont($event)">
                fantasy
              </button>
            </div>
          </div>
        </div>
  </div>

  <ng-template #content let-c="close" let-d="dismiss">
    <div class="modal-header">
      <h4 class="modal-title">Yours gif</h4>
      <button type="button" class="close" aria-label="Close" (click)="c('Close click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="gif-container">

        <div *ngIf="loader">
          <img src="../../../assets/images/loader.gif" alt="">
        </div>
        <div class="gif-block" *ngIf="gif">
          <img
            [src]="gif.url"
            alt="usermedia">
          {{gif.tags}}
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-dark" (click)="c('Close click')">Close</button>
    </div>
  </ng-template>

</div>
